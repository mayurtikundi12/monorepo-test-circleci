version: 2.1

# executors:
#   base:
#     docker:
#       - image: cimg/base:stable

parameters:
  project-one:
    type: boolean
    default: false
  project-two:
    type: boolean
    default: false
    

jobs:
  hello-job:
    docker:
      - image: cimg/node:17.2.0 # the primary container, where your job's commands are run
    steps:
      - checkout # check out the code in the project directory
      - run: echo "hello world" # run the `echo` command

workflows:
  build-and-deploy-to-ecs-sercice1:
    jobs:
      when: << pipeline.parameters.project-one >>
      - hello-job:
          name: Service One Job 1
          filters:
            branches:
              only:
                - circleci-project-setup

      when: << pipeline.parameters.project-one >>
      - hello-job:
          name: Service One Job 2
          filters:
            branches:
              only:
                - circleci-project-setup

      when: << pipeline.parameters.project-two >>
      - hello-job:
          name: Service Two
          filters:
            branches:
              only:
                - circleci-project-setup

       